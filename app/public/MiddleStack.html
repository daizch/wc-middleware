<link rel="import" href="./MiddleWare.html">
<script>
    class MiddleWareStack extends MiddleWare {
        constructor() {
            super();
            this._queue = [];
        }

        use(middleware) {
            var queue = this._queue;
            var len = queue.length;

            middleware.set_next(window);
            if (len > 0) {
                queue[len - 1].set_next(middleware);
            } else {
                this.set_next(middleware);
            }
            this._queue.push(middleware);
        }
    }

    window.customElements.define('middleware-stack', MiddleWareStack);
</script>
